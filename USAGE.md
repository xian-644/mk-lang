# MK-Lang 插件使用指南

## 安装方法

### 从VSIX文件安装
1. 在VSCode中，按下`Ctrl+Shift+X`打开扩展视图
2. 点击视图右上角的"..."按钮
3. 选择"从VSIX安装..."
4. 选择下载的`mk-lang-0.1.9.vsix`文件

### 从源码安装（开发模式）
1. 克隆或下载此仓库
2. 打开终端，进入项目目录
3. 运行`npm install`安装依赖
4. 按下`F5`启动调试模式
5. 在新打开的VSCode窗口中测试插件

## 配置插件

1. 在VSCode中，按下`Ctrl+,`打开设置
2. 搜索"mk-lang"
3. 设置以下选项：
   - **多语言中文包路径**：设置为你的语言包文件的路径
     - 支持绝对路径，例如：`C:/项目/src/locales/zh-CN.json`
     - 支持相对路径，例如：`src/locales/zh-CN.json`（相对于工作区根目录）
     - 支持两种文件格式：
       - JSON文件（.json）
       - JavaScript文件（.js），通过`export default`导出JSON对象
   - **替换格式模板**：可以设置为字符串或字符串数组
     - 单个模板示例：`$t("${key}")`
     - 多个模板示例：`["$t(\"${key}\")", "this.$t(\"${key}\")", "i18n.t(\"${key}\")"]`
     - 使用`${key}`作为占位符，会被替换为找到的key

## 使用方法

1. 打开任意包含中文的文件
2. 选中需要替换的中文文本
3. 右键点击，有两种选择：
   - 直接点击"mk-lang: 语言替换"，使用第一个模板替换
   - 展开子菜单"mk-lang: 选择模板"，选择需要使用的模板
4. 选中的文本将被替换为对应格式的引用

## 多模板配置示例

在VSCode的settings.json中配置多个模板：

```json
{
  "mk-lang.langPackPath": "src/locales/zh-CN.json",
  "mk-lang.formatTemplate": [
    "$t(\"${key}\")",
    "this.$t(\"${key}\")",
    "i18n.t(\"${key}\")",
    "t(\"${key}\")",
    "this.t(\"${key}\")"
  ]
}
```

配置后，右键菜单中会显示"mk-lang: 语言替换"命令和"mk-lang: 选择模板"子菜单。直接点击命令会使用第一个模板替换，展开子菜单可以选择其他模板。

## 示例

### JSON语言包示例
```json
{
  "welcome": "欢迎使用",
  "hello": "你好"
}
```

### JS语言包示例
```javascript
const zhLg = {
  "welcome": "欢迎使用",
  "hello": "你好"
};

export default zhLg;
```

1. 选中代码中的"欢迎使用"文本
2. 右键选择"mk-lang: 语言替换"直接使用第一个模板替换
3. 或者展开子菜单"mk-lang: 选择模板"，选择需要使用的模板
4. 文本将被替换为选择的格式，如`$t("welcome")`

## 常见问题

1. **找不到对应的key**
   - 确保语言包中包含了选中的中文文本
   - 检查中文文本是否完全匹配（包括空格、标点等）

2. **无法读取语言包**
   - 检查语言包路径是否正确
   - 如果使用相对路径，确保已打开工作区
   - 确保语言包是有效的JSON格式
   - 如果使用JS文件，确保正确导出了对象

3. **插件没有出现在右键菜单中**
   - 确保已选中文本
   - 重新加载VSCode窗口（Ctrl+R）

4. **子菜单没有显示所有模板**
   - 确保在settings.json中正确配置了模板数组
   - 子菜单内容会根据用户配置的模板动态变化

## 开发调试

如果你想修改或扩展此插件的功能：

1. 修改`extension.js`文件
2. 按下`F5`启动调试模式
3. 在新打开的VSCode窗口中测试修改后的功能